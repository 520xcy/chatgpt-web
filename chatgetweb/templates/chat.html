<!DOCTYPE html>
<html>


<head>
  <!-- <link rel="shortcut icon" href="" type="image/x-icon" /> -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <script src="https://cdn.bootcdn.net/ajax/libs/layui/2.7.6/layui.min.js"></script>
  <title>OpenAI</title>
  <style>
    body {
      color: #333;
      background-color: #eee;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background: black;
        color: white;
      }
    }

    pre {
      white-space: pre-wrap;
    }
  </style>
</head>

<body>
  <div align="center">
    <h2>Fake ChatGPT</h2>
    <div>注意：接口返回可能比较慢（服务在国外，并且OpenAI返回速度也比较慢），提交后需要等待处理完成，请勿重复提交！！！</div>
    <div>~接口返回有长度限制~</div>
    <hr />
    <span id="error"></span>
    <form>
      <textarea style="width:35%;" name="question" placeholder="点击这里输入问题" rows="11" id="question"></textarea>
      <br>
      <input type="button" style="width:150px;height:50px;background-color:green;font-size:30px" value="提交"
        id="submit" />
    </form>
    <div id="loading" style="display:none; color:red"><b>后端正在处理，请稍等...</b></div>

    <div style="text-align: left" id="re_question">
    </div>
  </div>
</body>
<script>

  let loading = $('#loading');
  let form = $('#form');
  $('#submit').click(function () {
    $(this).attr("disabled", true)
    loading.show()
    let question = $("#question").val()
    $("#re_question").append('<pre style="text-align:right">' + question + '</pre>')
    $("#error").empty()
    $.post("/chat", { question: question }, (res) => {

      if (res.code != 0) {



        $("#re_question").append('<pre style="text-align:left">' + res.message + '</pre>')
        loading.hide()
        $(this).attr("disabled", false)

      } else {
        $("#error").html(res.message)
        loading.hide()

        $(this).attr("disabled", false)


      }
    })
  });


</script>

</html>